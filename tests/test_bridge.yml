---
- name: simple bridge with all L2 ports
  hosts: switch
  gather_facts: no
  roles:
    - role: switch
      ops_system_hostname: bridge
      ops_intf_admin_state: up
      ops_debug: no
      ops_bridges:
        - name: bridge_normal
          ports: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10,
                  11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
                  21, 22, 23, 24, 25, 26, 27, 28, 29, 30,
                  31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
                  41, 42, 43, 44, 45, 46, 47, 48]

- name: check the config on the switch
  hosts: switch
  vars:
    ansible_user: admin
    ops_debug: no
    cli:
      username: "{{ ops_username }}"
      password: "{{ ops_password }}"
      host: "{{ ansible_host }}"
      port: "{{ ansible_port }}"
  tasks:
    - name: show running-config CLI
      ops_command:
        commands:
          - show running-config
        provider: "{{ cli }}"
        waitfor:
          - "result[0] contains 'hostname bridge'"
        interval: 1
        retries: 2
      register: result
      connection: local
    - name: debug the result
      debug: var=result
      when: ops_debug
